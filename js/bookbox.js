//以前的方法，欠考虑了；
function getFloorBook(str,fl) {
    var floor1 = ['i0.0/0', 'i06.53/7', 'i109.9/41', 'i16.0/96', 'i206.2/160',
        'i207.7/72', 'i207.22/78', 'i207.23/91', 'i207.42/38', 'i210.4/15',
        'i216.02/7', 'i217.2/06', 'i217.62/19', 'i222.749/11', 'i227.0/330',
        'i242.4/15', 'i246.4/51', 'i247.4/153', 'i247.5/983', 'i247.5/1574',
        //20
        'i247.5/1819', 'i247.5/2194', 'i247.5/2454', 'i247.5/2803', 'i247.52/66',
         'i247.53/285', 'i247.55/79', 'i247.57/498', 'i247.57/927','i247.57/1410',
        'i247.57/1782', 'i247.57/1998','i247.57/2437', 'i247.57/2983', 'i247.57/3389',
        'i247.6/45', 'i247.7/688', 'i247.7/957', 'i247.77/4', 'i25.0/887',
        //40

        'i253.0/20', 'i253.2/25', 'i26.0/29', 'i266.0/283', 'i267.0/846',
        'i267.0/1184', 'i267.0/1470', 'i267.0/1780', 'i267.0/2106', 'i267.0/2555',
        'i267.1/278', 'i267.1/682', 'i267.4/40', 'i313.072/2', 'i313.45/355',
        'i313.45/878','i404.5/1','i512.4/85','i512.45/24','i515.09/1',
        //60
        'i516.45/125','i524.45/11','i546.45/2','i561.13/2','i561.44/9',
        'i561.45/175','i561.45/323','i561.45/731','i562.45/2','i565.4/80',
        'i565.44/114','i565.6/7','i711.45/42','i712.45/5','i712.45/84',
        'i712.45/395','i712.45/669','i712.45/1071','i712.45/1397','i712.45/1716',
        //80
        'i712.65/17','j0.0/1','j06.0/84','j110.95/1','j212.0/36',
        'j228.2/33','j292.28/14','j292.75/2','j605.0/03','j61.0/3',
        'j623.26/23','j647.41/24','j657.65/94','j90.0/15','k0.0/1',
        'k126.0/26','k203.53/5','k210.9/1','k247.07/1','k261.1/9',
        //100
        'k295.8/199','k712.0/13','k825.2/115','k825.2/244','k827.52/84',
        'k835.12/53','k837.12/540','k926.5/3','z109.5/4','z999.999/999'
    //    剩下一个是空的热门书架和新书架，最后一个防止溢出
        ];
         var floor2=[
    'a0.0/0','a762.0/1','a841.692/8','b0.0/99','b089.0/1',
    'b21.0/7','b222.05/90','b223.1/8','b244.05/15','b261.0/20',
    'b502.43/4','b521.0/12','b804.4/47','b82.53/2','b821.49/431',
    'b83.692/13','b842.4/2','b848.4/279','b848.4/321','b94.05/1',
     //20
    'b959.92/3','c0.0/0','c53.0/130','c91.0/25','c912.49/26',
   'c913.0/26','c916.0/15','c93.49/2','c933.2/47','c962.0/33',
   'd035.0/138','d091.5/26','d232.0/5','d521.0/21','d616.0/204',
   'd663.0/11','d691.5/10','d756.56/1','d814.1/4','d871.20/38',
   // 40
   'd90.0/280','d909.5/2','d912.290/40','d914.01/27','d918.9/1',
   'd920.5/83','d922.149/6','d922.290/1','d922.294/9','d923.04/74',
   'd923.64/34','d924.05/46','d925.204/2','d937.1/1','d99.0/33',
   'e0.0/0','e892.25/40','f0.05/2','f015.0/79','f061.5/5',
   //60
   'f069.9/17','f097.12/12','f119.9/22','f123.9/53','f129.5/24',
   'f224.0/50','f224.5/187','f230.0/342','f234.2/33','f239.0/142',
   'f252.0/154','f270.0/578','f270.0/1089','f271.0/71','f272.9/119',
   'f272.92/275','f273.4/47','f275.0/347','f275.4/10','f276.7/99',
   // 80
   'f279.243/44','f283.0/44','f303.0/01','f416.471/1','f451.26/0',
   'f713.3/15','f713.36/187','f713.5/82','f713.52/26','f716.0/19',
   'f740.0/97','f746.41/1','f810.42/11','f812.42/31','f827.12/4',
   'f830.33/22','f830.59/82','f830.9/241','f830.91/394','f831.0/133',
    // 100
   'f832.51/51','f840.32/9','g12.0/37','g203.0/31','g210.0/59',
   'g219.29/14','g250.53/9','g257.36/3','g305.0/73','g40.054/23',
   'g449.0/11','g529.7/01','g640.0/51','g645.541/48','g649.28/1',
   'g78.0/104','g841.2/7','g852.4/42','h0.0/06','h019.0/155',
   // 120
   'h059.0/61','h109.4/22','h14.09/2','h152.3/185','h195.4/64',
   'h31.0/620','h31.0/990','h310.41/60','h313.62/9','h315.0/340',
   'h319.4/302','h319.4/1021','h319.4/1510','h319.4/2000','h319.4/2407',
   'h319.9/353','h32.0/31','h999.999/999',
   // 139,最后一个防止溢出
    ];
    var floor3=[];
    var floor=[floor1,floor2,floor3];
    var pattern=floor[fl-1];
        //计算第一个范围
        //该范围是一定存在的，如i，j ；
        // i
        var firstStrPattern=/[a-z]{1,}/;
        //i247.
        var firstNumPattern=/[a-z]{1,}\d{1,}\./g;
        //   .7/
        var middleNumPattern=/\.\d{1,}\//g;
        //   /7
        var lastNumPattern=/\/\d{1,}/g;

        var firstStr = str.match(firstStrPattern)[0];
        var firstNum=str.match(firstNumPattern)[0].slice(1,-1);
        var middleNum=str.match(middleNumPattern)[0].slice(1,-1);
        // 最后一个应该是一个数字，本来是字符，被同学默认为数字了
        var lastNum=parseInt(str.match(lastNumPattern)[0].slice(1));

        console.log(firstStr);
        console.log(firstNum);
        console.log(middleNum);
        console.log(lastNum);

        // 测试数组是否正确；
        // var testarr=$.grep(pattern,function(n,i){
        //    // return n.match(firstStrPattern)[0];
        //     //return n.match(firstNumPattern)[0].slice(1,-1);
        //    // return n.match(middleNumPattern)[0].slice(1,-1);
        //   // return parseInt(n.match(lastNumPattern)[0].slice(1));
        // });
        // return testarr;
        
        //不用自己的方法，效率太低
        var beginArr=$.grep(pattern,function (n,i) {
            //不一定有首字母吧，i6就没有；
            if (n.match(firstStrPattern)[0]===firstStr) {
                var beginRange = n.match(firstNumPattern)[0].slice(1, -1);
                if (beginRange === firstNum) {
                    //如果有相等的，继续比较啊
                    var middleRange = n.match(middleNumPattern)[0].slice(1, -1);
                    
                    if (middleRange === middleNum) {
                        //如果有相等的，继续比较啊
                        var lastRange = parseInt(n.match(lastNumPattern)[0].slice(1));
                        if (lastRange ===lastNum) {
                            //不可能还有多个了
                            return false;
                        }else if (lastRange>lastNum) {
                        	return i;
                        }
                    } else if (middleRange > middleNum) {
                        return i;
                    }

                } else if (beginRange > firstNum) {
                    return i;
                }
                
            }
            
        });
    var mystr=beginArr[0]; 
    var num=0;
    console.log(mystr);
        $.each(pattern,function(index,value){
            if (value==mystr) {
                num=index;
            }
        });
return num;
}
 // console.log("暑假是"+getFloorBook("i270.0/1127",1));

function getAsciiFloorBook(str) {
	// 图书馆的书其实是按，ascii排的，除前几位数字比较相同的；被同学按数字大小排乱了
	var floor=null;
	// 比较出floor；
	var floorPattern=[/^[i-kz]/i,/^[a-h]/i,/^[n-x]/i];
	for (var i = 0; i < floorPattern.length; i++) {
		if(floorPattern[i].exec(str.slice(0,1))!==null){
			floor=i;
		}
	}
	console.log(floor);
	// 现在floor已经有楼层的值了
    // 定义每个楼层
    var floor1 = ['i0', 'i06-53/7', 'i109.9/41', 'i16/96', 'i206.2/160',
        'i206.7/72', 'i207.22/78', 'i207.23/91', 'i207.42/38', 'i210.4/15',
        'i216.02/7/1', 'i217.2/06/16', 'i217.62/29/2', 'i222.749/11', 'i227/330',
        'i242.4/15-36/1', 'i246.4/51', 'i247.4/153-2/1', 'i247.5/0983-2/2', 'i247.5/1574',
        //20
        'i247.5/1819', 'i247.5/2194', 'i247.5/2454', 'i247.5/2803', 'i247.52/66',
        // 这几个后面相同的有问题，加个0不就好了
         'i247.53/285', 'i247.55/79', 'i247.57/498', 'i247.57/0927','i247.57/1410',
        'i247.57/1782', 'i247.57/1998','i247.57/2437', 'i247.57/2983', 'i247.57/3389',
        'i247.6/45', 'i247.7/688', 'i247.7/957', 'i247.77/4', 'i25/877',
        //40

        'i250/20', 'i253.2/25', 'i26/59', 'i260/283', 'i260/846',
        'i260/1184', 'i260/1470', 'i260/1780', 'i260/2106', 'i260/2555',
        'i267.1/278', 'i267.1/682', 'i267.4/40', 'i313.072/2', 'i313.45/355/2',
        'i313.45/878','i404.5/1','i512.4/85','i512.45/24','i5109/1',
        //60
        'i516.45/125','i524.45/11','i546.45/2','i561.13/02/7','i561.44/9-4',
        'i561.45/175','i561.45/323','i561.45/731','i562.45/2','i565.4/80',
        'i565.44/114','i565.6/7',
        // 前面全部测试，后面为很小的数其实不影响大局
        'i711.45/42','i712.45/5','i712.45/84',
        'i712.45/395','i712.45/669','i712.45/1071','i712.45/1397','i712.45/1716',
        //80
        'i712.65/17','j0','j06/84','j110.95/1','j210/36',
        'j228.2/33','j292.28/14','j292.75/2','j605/03','j61/3',
        'j623.26/23','j647.41/24','j657.65/94','j90/15','k0.1',
        'k120/26','k203-53/5','k210.9/1','k2407/1','k261.1/9',
        //100
        'k295.8/199','k710/13','k825.2/115','k825.2/244','k827.52/84',
        'k835.12/53','k837.12/540','k926.5/3','z109.5/4','z999.999/999'
    //    剩下一个是空的热门书架和新书架，最后一个防止溢出
        ];
    var floor2=[
    'a0.0','a760/1','a841.692/8','b0.99','b080/1',
    'b21/7','b2205/90','b223.1/8','b2405/15','b260/20',
    'b502.43/4','b520/12','b804.4/47','b82.53/2','b821.49/431',
    'b83.692/13','b842.4/2','b848.4/279','b848.4/321','b945/1',
     //20
    'b959.92/3','c0.0','c53/130','c91/25','c912.49/26',
   'c910/26','c910/15','c93.49/2','c933.2/47','c960/33',
   'd030/138','d091.5/26','d230/5','d520/21','d610/204',
   'd660/11','d691.5/10','d756.56/1','d814.1/4','d871.20/38',
   // 40
   'd90/280','d909.5/2','d912.290/40','d9101/27','d918.9/1',
   'd920.5/83','d922.149/6','d922.290/1','d922.294/9','d9204/74',
   'd923.64/34','d9205/46','d925.204/2','d937.1/1','d99/33',
   'e0.0','e892.25/40','f0./2','f010/79','f061.5/5',
   //60
   'f069.9/17','f097.12/12','f119.9/22','f123.9/53','f129.5/24',
   'f220/50','f224.5/187','f230/342','f234.2/33','f230/142',
   'f250/154','f270/578','f270/1089','f270/71','f272.9/119',
   'f272.92/275','f273.4/47','f270/347','f275.4/10','f276.7/99',
   // 80
   'f279.243/44','f280/44','f300/01','f416.471/1','f451.26/0',
   'f713.3/15','f713.36/187','f713.5/82','f713.52/26','f710/19',
   'f740/97','f746.41/1','f810.42/11','f812.42/31','f827.12/4',
   'f830.33/22','f830.59/82','f830.9/241','f830.91/394','f830/133',
    // 100
   'f832.51/51','f840.32/9','g12/37','g200/31','g210/59',
   'g219.29/14','g250.53/9','g257.36/3','g300/73','g4054/23',
   'g440/11','g529.7/01','g640/51','g645.541/48','g649.28/1',
   'g78/104','g841.2/7','g852.4/42','h0.06','h010/155',
   // 120
   'h050/61','h109.4/22','h149/2','h152.3/185','h195.4/64',
   'h31/620','h31/990','h310.41/60','h313.62/9','h310/340',
   'h319.4/302','h319.4/1021','h319.4/1510','h319.4/2000','h319.4/2407',
   'h319.9/353','h32/31','h999.999/999'
   // 139,最后一个防止溢出
    ];
    //后期补充
    var floor3=[1,2,3,4,5,4,5];
    // 得到楼层的数组
    var pattern=[floor1,floor2,floor3];
    var floorArr=pattern[floor];
    var finalArr=$.grep(floorArr,function (n,i) {
        //还需要写个，刚刚提到过的特殊情况；
    	if (n>str) {
    		return i;
    	}
    });
    var mystr=finalArr[0]; 
    var num=0;
    console.log(mystr);
        $.each(floorArr,function(index,value){
            if (value===mystr) {
                num=index;
            }
        });
return [floor+1,num];
}
console.log("暑假是"+getAsciiFloorBook("i270/1127"));
//[1,53];

function caculateBookList(str){
	//记得变大写为小写
	var lowerStr=str.toLowerCase();
    //得到一个数组
    return getAsciiFloorBook(str);
}

//特殊调用，当出现没库存，去单本库时，使用，后面考虑；
function getFloor4Book() {
    var floor4=[];
}





